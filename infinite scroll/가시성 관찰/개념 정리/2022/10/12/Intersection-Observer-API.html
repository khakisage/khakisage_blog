<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Intersection Observer API | hello world</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Intersection Observer API" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="기술 면접 개념 정리" />
<meta property="og:description" content="기술 면접 개념 정리" />
<link rel="canonical" href="https://khakisage.github.io/khakisage_blog/infinite%20scroll/%EA%B0%80%EC%8B%9C%EC%84%B1%20%EA%B4%80%EC%B0%B0/%EA%B0%9C%EB%85%90%20%EC%A0%95%EB%A6%AC/2022/10/12/Intersection-Observer-API.html" />
<meta property="og:url" content="https://khakisage.github.io/khakisage_blog/infinite%20scroll/%EA%B0%80%EC%8B%9C%EC%84%B1%20%EA%B4%80%EC%B0%B0/%EA%B0%9C%EB%85%90%20%EC%A0%95%EB%A6%AC/2022/10/12/Intersection-Observer-API.html" />
<meta property="og:site_name" content="hello world" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-10-12T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Intersection Observer API" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-12T00:00:00-05:00","datePublished":"2022-10-12T00:00:00-05:00","description":"기술 면접 개념 정리","headline":"Intersection Observer API","mainEntityOfPage":{"@type":"WebPage","@id":"https://khakisage.github.io/khakisage_blog/infinite%20scroll/%EA%B0%80%EC%8B%9C%EC%84%B1%20%EA%B4%80%EC%B0%B0/%EA%B0%9C%EB%85%90%20%EC%A0%95%EB%A6%AC/2022/10/12/Intersection-Observer-API.html"},"url":"https://khakisage.github.io/khakisage_blog/infinite%20scroll/%EA%B0%80%EC%8B%9C%EC%84%B1%20%EA%B4%80%EC%B0%B0/%EA%B0%9C%EB%85%90%20%EC%A0%95%EB%A6%AC/2022/10/12/Intersection-Observer-API.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/khakisage_blog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://khakisage.github.io/khakisage_blog/feed.xml" title="hello world" /><link rel="shortcut icon" type="image/x-icon" href="/khakisage_blog/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/khakisage_blog/">hello world</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/khakisage_blog/about/">About Me</a><a class="page-link" href="/khakisage_blog/gitInfo/">gitInfo</a><a class="page-link" href="/khakisage_blog/search/">Search</a><a class="page-link" href="/khakisage_blog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Intersection Observer API</h1><p class="page-description">기술 면접 개념 정리</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-10-12T00:00:00-05:00" itemprop="datePublished">
        Oct 12, 2022
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      1 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/khakisage_blog/categories/#infinite scroll">infinite scroll</a>
        &nbsp;
      
        <a class="category-tags-link" href="/khakisage_blog/categories/#가시성 관찰">가시성 관찰</a>
        &nbsp;
      
        <a class="category-tags-link" href="/khakisage_blog/categories/#개념 정리">개념 정리</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#intersection-observer-api">Intersection Observer API</a>
<ul>
<li class="toc-entry toc-h3"><a href="#개발-배경">개발 배경</a></li>
<li class="toc-entry toc-h3"><a href="#intersection-observer">Intersection Observer</a></li>
<li class="toc-entry toc-h3"><a href="#사용법">사용법</a></li>
</ul>
</li>
</ul><h1 id="intersection-observer-api">
<a class="anchor" href="#intersection-observer-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Intersection Observer API</h1>

<h3 id="개발-배경">
<a class="anchor" href="#%EA%B0%9C%EB%B0%9C-%EB%B0%B0%EA%B2%BD" aria-hidden="true"><span class="octicon octicon-link"></span></a>개발 배경</h3>

<p>기존 <code class="language-plaintext highlighter-rouge">scroll</code> 이벤트와 <strong>가시성 관찰</strong>에 이용되는 <code class="language-plaintext highlighter-rouge">getBoundingClientRect</code>의 문제를 해결하기 위함.</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">scroll</code> 이벤트의 문제점 <br>
스크롤 시 짧은 시간에 수 백, 수 천의 이벤트가 <strong>동기적</strong> 으로 실행될 수 있음.
따라서, 실행되는 이벤트에 대한 리스너로 인하여 상응하는 콜백들이 메인 스레드에 큰 부하를 줄 수 있음.</p>
  </li>
  <li>
    <p>getBoundingClientRect의 문제점 <br>
일반적으론, 여러 작업이 <code class="language-plaintext highlighter-rouge">queue</code>에 쌓여서 한 번의 <code class="language-plaintext highlighter-rouge">reflow</code>로 처리하지만, <code class="language-plaintext highlighter-rouge">getBoundingClientRect</code> 호출 시, 정확한 위치 정보를 파악하기 위해 여러번의 <code class="language-plaintext highlighter-rouge">reflow</code>가 발생됨.</p>
  </li>
</ul>

<h3 id="intersection-observer">
<a class="anchor" href="#intersection-observer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Intersection Observer</h3>

<ul>
  <li>Intersection Observer는 모든 영역을 사각형으로 취급함.(요소가 사각형이 아니더라도, 요소의 모든 부분을 픽셀과 같이 작은 사각형으로 가정하여 가시성을 계산함.)
루트 요소와 타겟 요소의 교차점을 관찰하여 타겟 요소가 루트 요소에 들어가거나 벗어날 때, 혹은 두 요소의 교차부분(intersectionRatio)이 변경될 때, 지정한 콜백이 호출됨.
즉, 기존 scroll 이벤트와 다르게 교차점이 관찰될 시, <strong>비동기적</strong>으로 실행되며, 가시성이 관측될 때마다 reflow가 발생하지 않아 성능면에서 유리함.</li>
</ul>

<h3 id="사용법">
<a class="anchor" href="#%EC%82%AC%EC%9A%A9%EB%B2%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>사용법</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// callback이 호출되는 상황(조건)을 정의. (root요소를 정의하지 않으면, default로 viewport가 root 요소로 설정됨.)</span>
<span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">root</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#scrollArea</span><span class="dl">'</span><span class="p">),</span>
  <span class="na">rootMargin</span><span class="p">:</span> <span class="dl">'</span><span class="s1">0px</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">threshold</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
<span class="p">};</span>
<span class="c1">// options에 따라 observer 인스턴스 생성.</span>
<span class="kd">let</span> <span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IntersectionObserver</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>

<span class="c1">// 타겟 요소 관찰 시작.</span>
<span class="kd">let</span> <span class="nx">target</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#listItem</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
</code></pre></div></div>

  </div><a class="u-url" href="/khakisage_blog/infinite%20scroll/%EA%B0%80%EC%8B%9C%EC%84%B1%20%EA%B4%80%EC%B0%B0/%EA%B0%9C%EB%85%90%20%EC%A0%95%EB%A6%AC/2022/10/12/Intersection-Observer-API.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/khakisage_blog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/khakisage_blog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/khakisage_blog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>An easy to use blogging platform with support for Jupyter Notebooks.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/fastai" target="_blank" title="fastai"><svg class="svg-icon grey"><use xlink:href="/khakisage_blog/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/fastdotai" target="_blank" title="fastdotai"><svg class="svg-icon grey"><use xlink:href="/khakisage_blog/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
